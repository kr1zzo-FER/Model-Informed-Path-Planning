# [Model-informed path planning and control for autonomous vessels](https://repozitorij.fer.unizg.hr/islandora/object/fer:12451)

![GitHub_Action_Linux_CI](https://github.com/AtsushiSakai/PythonRobotics/workflows/Linux_CI/badge.svg)

<div style="text-align: center;">
    <img src="assets/map_intro.png" alt="drawing" width="500"/>
</div>

## üí° Project description

#### This repository is a part of the diploma thesis at the Faculty of [Electrical Engineering and Computing, University of Zagreb](https://www.fer.unizg.hr/), [Laboratory for Underwater Systems and Technologies](https://labust.fer.hr/) in the academic year 2023./2024. The main goal of the thesis is to develop a _model-informed path planning and control for autonomous vessels (Croatian: Modelski informirano globalno planiranje putanje i upravljanje autonomnoga plovila)_.

The software support is developed within the ROS2 framework due to the requirements for modularity and communication with external interfaces. The navigational area map constitutes a mathematical model of the environment, generated by processing and integrating features from multiple images into a coherent representation of the geographical space. To convert the features of the shoreline and zones of distance from the shore into geographical coordinates, a principle of creating a local coordinate system on a metric scale was introduced. This principle is also used for data visualization in the RViz2 tool. In addition to data visualization, Rviz2 participates in the process of setting the starting and ending points of the path. Determining these points is a critical factor in the vessel path planning process using the classic D* Lite algorithm to calculate the path on a cost map. The classic D* algorithm, without the vessel dynamics model, is not suitable for planning without adjustments because the path is not smooth and contains sudden changes in direction.
Consequently, a path interpolation model was created using a point distribution and curve fitting process.

## ROS2 Software Architecture for Vessel Path Planning

This project implements a modular and scalable software architecture using **Robot Operating System 2 (ROS2)** for vessel path planning. ROS2 serves as an industry-standard middleware framework designed for developing advanced robotic applications, emphasizing stability, security, and reliability.

### Key Components

1. **Workspace: `path_planning_ws`**
   - Organized into standard ROS2 directories:
     - `src`: Contains core packages (`map_maker`, `path_planning_client`, `path_planning_server`, `user_action_interfaces`).
     - `build`, `install`, and `log`: Support package compilation, installation, and logging.

2. **Packages:**
   - **`map_maker`**: Generates and publishes geographical maps.
   - **`path_planning_client`**: Manages start/end points, visualizes data in RViz2, and communicates with the server using the Action mechanism.
   - **`path_planning_server`**: Executes path planning algorithms, generating safe and smooth vessel trajectories.
   - **`user_action_interfaces`**: Defines custom messages and actions for inter-package communication.

3. **Communication Mechanisms:**
   - **Topics**: Publish-subscribe model for sensor and control data.
   - **Actions**: Complex, multi-step interactions between client and server nodes.

4. **Black-Box Concept:**
   - Ensures compatibility and modularity by exchanging data in global geographic coordinates, allowing seamless integration and upgrades.

This modular design supports real-world applications, enabling interoperability with external systems for visualization, navigation, and control.

## ROS2 commands

# map_maker package

## Introduction

## Introduction

To develop a global path planning system for vessels, the first step is creating a geographic map with hydrographic features. Nautical charts are typically used for this purpose, as they include essential details such as seafloor morphology, coastline coordinates, and navigation hazards. Due to the unavailability of digital nautical charts and other digital maps, custom programs were created to process data from OpenStreetMap, focusing on coastline coordinates and distances. Future project stages will incorporate additional hydrographic details, such as seafloor morphology and navigation hazards. This chapter outlines the map creation process, including data conversion and integration with the ROS2 framework.

![Alt text](assets/map_maker_process_1.png)

## Running the map_maker Package

```sh
ros2 launch map_maker make_map_launch.py
```

Default values:
```sh
save_file_name:="jadranovo"

locations:='["sv_marko","voz","jadranovo", "kacjak", "rudine"]'

grid_size:="10"

show_plot:="False"
```

Example values:
```sh
save_file_name:="klimno"

locations:='["dramalj", "crikvenica", "selce", "rudine", "klimno", "silo", "petrina", "vodica", "melska"]'

grid_size:="10"

show_plot:="True"
```
## Running the path_planning_client Package

## Intraduction



## Running the path_planning_server Package

## Introduction

# 

## Credits

#### [&copy; Faculty of Electrical Engineering and Computing, University of Zagreb, 2024](https://www.fer.unizg.hr/)

#### [&copy; Laboratory for Underwater Systems and Technologies (LABUST)](https://labust.fer.hr/)

<img src="assets/labust_logo.png" alt="drawing" width="50"/>
<img src="assets/FER_logo_3.png" alt="drawing" width="200"/>

&NewLine;

Contributors names and contact info

Author|GitHub | e-mail
| :--- | :---: | :---:
Enio Krizman  | [@kr1zzo](https://github.com/kr1zzo) | enio.krizman@fer.hr

Mentors | e-mail
| :--- | :---: 
Doc. Dr. Sc. ƒêula Naƒë  | dula.nad@fer.hr
Dr. Sc. Nadir Kapetanoviƒá  | nadir.kapetanovi@fer.hr

## Acknowledgments

This repository is built using the following resources and it is used only for educational purposes:
* [PythonRobotics repository](https://github.com/AtsushiSakai/PythonRobotics)
* [PythonRobotics documentation](https://arxiv.org/abs/1808.10703)
